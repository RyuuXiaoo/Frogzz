<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrogzzStore TopUp Roblox</title>
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            transition: background 0.5s, color 0.5s;
        }
        :root {
            --bg: #f0f2f5;
            --container-bg: #fff;
            --text: #000;
            --header-bg: linear-gradient(135deg, #6A11CB, #2575FC);
            --button-bg: #6A11CB;
            --button-hover: #218838;
        }
        [data-theme="dark"] {
            --bg: #121212;
            --container-bg: #1e1e1e;
            --text: #f0f2f5;
            --header-bg: linear-gradient(135deg, #000000, #434343);
            --button-bg: #333;
            --button-hover: #555;
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--header-bg);
            color: white;
            padding: 10px 15px;
        }
        .header img {
            height: 40px;
            width: 40px;
            object-fit: cover;
            border-radius: 50%;
        }
        .header h1 {
            font-size: 20px;
            margin: 0;
            text-align: center;
            flex-grow: 1;
        }
        .header .total-price {
            font-weight: bold;
        }
        .theme-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
        }
        .store-status {
            text-align: center;
            padding: 10px;
            font-weight: bold;
            border-radius: 5px;
            margin: 10px 15px;
            font-size: 16px;
        }
        .store-status.open {
            background: #d4edda;
            color: #155724;
        }
        .store-status.closed {
            background: #f8d7da;
            color: #721c24;
        }
        .countdown {
            text-align: center;
            font-size: 14px;
            margin-top: 5px;
            color: #888;
        }
        .progress-bar {
            width: 0%;
            height: 5px;
            background: #6A11CB;
            transition: width 1s linear;
        }
        .container {
            background: var(--container-bg);
            margin: 15px;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: background 0.5s;
        }
        label {
            font-weight: bold;
            margin-top: 10px;
            display: block;
        }
        input, select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            background: var(--bg);
            color: var(--text);
        }
        .diamond-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        .diamond-item {
            background: #f0f0f0;
            padding: 10px;
            text-align: center;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s, box-shadow 0.3s;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        [data-theme="dark"] .diamond-item {
            background: #333;
        }
        .diamond-item img {
            width: 30px;
            height: 30px;
            margin-bottom: 5px;
        }
        .diamond-item:hover {
            background: #e0e0e0;
            transform: scale(1.05);
        }
        .diamond-item.selected {
            border: 2px solid #6A11CB;
            background: #e6e0f8;
            box-shadow: 0 0 10px #6A11CB;
        }
        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #ddd;
        }
        .footer .total {
            font-size: 18px;
            color: #2575FC;
            font-weight: bold;
        }
        .footer button {
            background: var(--button-bg);
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .footer button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .footer button:enabled:hover {
            background: var(--button-hover);
        }
        .payment-info {
            display: none;
            background: #555;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-top: 10px;
        }
        #qris-img {
            display: none;
            max-width: 100%;
            margin-top: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="logo.jpg" alt="Logo">
        <h1>Top Up Voucher Roblox</h1>
        <button class="theme-toggle" onclick="toggleTheme()">🌙</button>
        <div class="total-price" id="totalHeader">Rp 0</div>
    </div>
    <div id="store-status" class="store-status"></div>
    <div class="countdown" id="countdown"></div>
    <div class="progress-bar" id="progressBar"></div>
    <div class="container">
        <label for="ffid">Masukkan Username Roblox Kalian</label>
        <input type="text" id="ffid" placeholder="Contoh : Username_123" oninput="checkForm()">
        <label>Pilih Jumlah Diamond</label>
        <div class="diamond-grid" id="diamondGrid"></div>
        <label for="payment">Pilih Metode Pembayaran</label>
        <select id="payment" onchange="showPaymentInfo(); updatePrice(); checkForm()">
            <option value="" disabled selected>-- Pilih Pembayaran --</option>
            <option value="dana">Dana</option>
            <option value="gopay">GoPay</option>
            <option value="qris">QRIS</option>
        </select>
        <div class="payment-info" id="payment-info"></div>
        <img id="qris-img" src="qris.jpg" alt="QRIS Code">
        <label for="proof">Upload Bukti Pembayaran</label>
        <input type="file" id="proof" accept="image/*" onchange="checkForm()">
    </div>
    <div class="footer">
        <div class="total" id="totalFooter">Rp 0</div>
        <button id="confirm-btn" onclick="sendWhatsApp()" disabled>CONFIRM</button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        let theme = "light";
        function toggleTheme() {
            theme = (theme === "light") ? "dark" : "light";
            document.documentElement.setAttribute("data-theme", theme);
            document.querySelector(".theme-toggle").textContent = theme === "dark" ? "☀️" : "🌙";
        }

const diamondList = [
    { name: "200 Robux", price: 60095 },    // 59.000 + 1.095
    { name: "400 Robux", price: 106095 },   // 105.000 + 1.095
    { name: "800 Robux", price: 166095 },   // 165.000 + 1.095
    { name: "1.000 Robux", price: 206095 }, // 205.000 + 1.095
    { name: "1.200 Robux", price: 281095 }, // 280.000 + 1.095
    { name: "2.000 Robux", price: 408928 }, // 407.833 + 1.095
    { name: "4.500 Robux", price: 799090 }, // 797.995 + 1.095
    { name: "10.000 Robux", price: 1711095 } // 1.710.000 + 1.095
];
        const diamondGrid = document.getElementById("diamondGrid");
        let selectedDiamond = null;

        diamondList.forEach((item, index) => {
            const div = document.createElement("div");
            div.className = "diamond-item";
            div.innerHTML = `<img src="robux.png" alt="Diamond">${item.name}<br>Rp ${item.price.toLocaleString('id-ID')}`;
            div.onclick = () => selectDiamond(index);
            diamondGrid.appendChild(div);
        });

        function selectDiamond(index) {
            document.querySelectorAll(".diamond-item").forEach(el => el.classList.remove("selected"));
            diamondGrid.children[index].classList.add("selected");
            selectedDiamond = diamondList[index];
            updatePrice();
            checkForm();
        }

        function updatePrice() {
            let total = selectedDiamond ? selectedDiamond.price : 0;
            const payment = document.getElementById("payment").value.toLowerCase();
            if (payment === "qris") total += 200;
            const totalText = "Rp " + total.toLocaleString('id-ID');
            document.getElementById("totalHeader").textContent = totalText;
            document.getElementById("totalFooter").textContent = totalText;
        }

        function showPaymentInfo() {
            const payment = document.getElementById("payment").value.toLowerCase();
            const info = document.getElementById("payment-info");
            const qris = document.getElementById("qris-img");
            qris.style.display = "none";

            if (payment === "dana") {
                info.textContent = "No Dana: 0895404358445 (Transfer sesuai harga)";
                info.style.display = "block";
            } else if (payment === "gopay") {
                info.textContent = "No GoPay: 0895404358445 (Transfer sesuai harga)";
                info.style.display = "block";
            } else if (payment === "qris") {
                info.textContent = "Scan QRIS berikut untuk pembayaran.";
                info.style.display = "block";
                qris.style.display = "block";
            } else {
                info.style.display = "none";
            }
        }

        function checkForm() {
            const ffid = document.getElementById("ffid").value.trim();
            const payment = document.getElementById("payment").value;
            const proof = document.getElementById("proof").files.length > 0;
            const confirmBtn = document.getElementById("confirm-btn");
            confirmBtn.disabled = !(ffid && selectedDiamond && payment && proof);
        }

        function getNextOpenTime() {
            const now = new Date();
            const dayMs = 24 * 60 * 60 * 1000;
            const times = [
                { start: "07:20", end: "10:30" },
                { start: "19:30", end: "20:10" }
            ];
            for (let t of times) {
                const [h, m] = t.start.split(":").map(Number);
                const openTime = new Date(now);
                openTime.setHours(h, m, 0, 0);
                if (openTime > now) return openTime;
            }
            return new Date(now.getTime() + dayMs).setHours(7, 20, 0, 0);
        }

        function updateCountdown() {
            const now = new Date();
            const nextOpen = getNextOpenTime();
            const diff = nextOpen - now;
            const hours = Math.floor(diff / 3600000);
            const mins = Math.floor((diff % 3600000) / 60000);
            const secs = Math.floor((diff % 60000) / 1000);
            document.getElementById("countdown").textContent =
                `Buka dalam ${hours} jam ${mins} menit ${secs} detik`;
            const progress = 100 - ((diff / (3 * 60 * 60 * 1000)) * 100);
            document.getElementById("progressBar").style.width = Math.min(100, progress) + "%";
        }

        function checkStoreHours() {
            const now = new Date();
            const hour = now.getHours();
            const minute = now.getMinutes();
            const currentTime = hour * 60 + minute;
            const storeStatus = document.getElementById("store-status");
            const confirmBtn = document.getElementById("confirm-btn");
            const isMorningOpen = currentTime >= 440 && currentTime <= 630;
            const isEveningOpen = currentTime >= 1170 && currentTime <= 1210;

            if (isMorningOpen || isEveningOpen) {
                storeStatus.textContent = "🟢 STORE BUKA - Admin Online";
                storeStatus.className = "store-status open";
                document.getElementById("countdown").textContent = "";
                document.getElementById("progressBar").style.width = "0%";
                checkForm();
            } else {
                storeStatus.textContent = "🔴 STORE TUTUP - BUKA KEMBALI JAM 07.20–10.30 & 19.30–20.10";
                storeStatus.className = "store-status closed";
                confirmBtn.disabled = true;
                updateCountdown();
            }
        }

        function sendWhatsApp() {
            const now = new Date();
            const hour = now.getHours();
            const minute = now.getMinutes();
            const currentTime = hour * 60 + minute;
            const isMorningOpen = currentTime >= 440 && currentTime <= 630;
            const isEveningOpen = currentTime >= 1170 && currentTime <= 1210;

            if (!(isMorningOpen || isEveningOpen)) {
                Swal.fire({
                    icon: 'error',
                    title: '🚫 STORE TUTUP',
                    text: 'Buka kembali jam 07.20–10.30 & 19.30–20.10',
                    showConfirmButton: true,
                    confirmButtonColor: '#6A11CB'
                });
                return;
            }

            const ffid = document.getElementById("ffid").value.trim();
            const payment = document.getElementById("payment").value;
            const waNumber = "6289510356958";
            const message1 = `.${selectedDiamond.name}, ${ffid}, ${payment}`;
            const waLink1 = `https://wa.me/${waNumber}?text=${encodeURIComponent(message1)}`;
            window.open(waLink1, "_blank");

            const message2 = `Silahkan kirim bukti transfer di sini agar kami bisa memproses pesanan Anda.`;
            const waLink2 = `https://wa.me/${waNumber}?text=${encodeURIComponent(message2)}`;
            setTimeout(() => {
                window.open(waLink2, "_blank");
            }, 1000);
        }

        checkStoreHours();
        setInterval(checkStoreHours, 1000);
        setInterval(updateCountdown, 1000);
    </script>
</body>
</html>